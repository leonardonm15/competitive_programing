#include <bits/stdc++.h>

using namespace std;

#define endl '\n' 
#define int long long
#define ti tuple<int, int, int>

void solve () {
    int n; cin >> n;
    vector<int> time(3e7 + 100);
    vector<tuple<int, int, int, int>> arr;
    queue<ti> queue;

    for (int i = 0; i < n; i++) {
        int t, d, o; cin >> t >> d >> o;
        arr.push_back({t, d, o, i + 1});
    }

    sort(arr.begin(), arr.end());

    for (int i = 1; i <= n; i++) {
        auto [t, d, o, idx] = arr[i - 1];
        time[t] = i;
    }

    vector<int> resp;


    int t = 1;
    while (t <= (int)3e7 + 5) {
        if (get<2>arr[time[i] - 1] == 0) {
            auto [q, d, o, idx] = arr[time[i] - 1];
            queue.push({q, d, idx});
        }

        if (time[t] == 0 && !queue.empty()) {
            auto [_, d, idx] = queue.front();
            queue.pop();
            int tf = t + d - 1;
            while (t <= tf) {
                if (time[t]) {
                    resp.push_back(idx);
                    break;
                }
                t++;
            }
        } else if (time[t]) {
            int inicio = t;
            auto [_, d, o, idx] = arr[time[t] - 1];
            int tf = t + d - 1;
            while (t <= tf) {
                if (time[t] && t != inicio) {
                    resp.push_back(idx);
                    break;
                }
                t++;
            }
        } else t++;

    }

    cout << resp.size() << endl;
    for (auto c: resp) cout << c << " ";
    cout << endl;

}

signed main() {
    /* ios_base::sync_with_stdio(0);cin.tie(0); */
    int TC = 0;
    if (TC){
        cin >> TC;
        while (TC--) solve();
    } else {
        solve();
    }
    return 0;
}
